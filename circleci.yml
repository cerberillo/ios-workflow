machine:
    timezone:
        Europe/Berlin
    xcode:
        version: "7.3"

test:
    override:
        - xcodebuild
            -workspace library
            -sdk iphonesimulator
            -scheme library
            ONLY_ACTIVE_ARCH=NO
            GCC_INSTRUMENT_PROGRAM_FLOW_ARCS=YES
            GCC_GENERATE_TEST_COVERAGE_FILES=YES
            clean test
            | tee $CIRCLE_ARTIFACTS/build.log
            | xcpretty
                -c
                -r junit --output $CIRCLE_TEST_REPORTS/report.xml
                -r html --output $CIRCLE_TEST_REPORTS/report.html
                -r json-compilation-database --output $CIRCLE_TEST_REPORTS/report.json
    post:
        - bundle exec slather
#---------------------- TODO:
#   master:
#        branch: master
#        commands:
#            - Create library, tag and release on GitHub
